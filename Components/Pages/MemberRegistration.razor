@page "/members/new"
@inject SelfHelpLedger.Data.AppDbContext DbContext
@using SelfHelpLedger.Models
@using Microsoft.AspNetCore.Components.Forms

<h3>Register New Member</h3>

<EditForm Model="@member" OnValidSubmit="HandleValidSubmit" FormName="MemberRegistrationForm">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="name">Name:</label>
        <InputText id="name" class="form-control" @bind-Value="member.Name" />
    </div>
    <div class="form-group">
        <label for="balance">Initial Balance:</label>
        <InputNumber id="balance" class="form-control" @bind-Value="member.Balance" />
    </div>
    <button type="submit" class="btn btn-primary mt-3">Register</button>
</EditForm>


@code {
    private Member member = new();

    private async Task HandleValidSubmit()
    {
        DbContext.Members.Add(member);
        await DbContext.SaveChangesAsync();
        // Optionally, navigate to the member list or show a confirmation message
    }
}
